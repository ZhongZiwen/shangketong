博主你好，新手请教，请问如何处理token过期后从任意controller跳回登陆界面的情况？我现在有几个api用到了token，那么就会存在token过期的情况，当token过期时，需要跳回登陆界面重新登陆。我在调api时服务器会在response的header里返回401，我现在是在每个需要调api的controller里都监听通知，如果api返回了401，就post通知，然后收到通知的controller就pop回root，我知道这样做不太好，所以想请教有没有更好的解决方案。

前半部分没错，遇到token失效就扔个Notification出去。 但是接收Notification的人不是ViewController。你应该有一个中间人接收这个Notification，而且你的Notification的object是当前正在发起请求失败的这个APIManager。 具体流程应该是这样： XAPIManager请求失败（token失效，且在BaseApiManager中判断）后，扔出通知，将通知的object设为当前失败的这个Manager也就是XManager。 然后中间人收到通知，记录下随着Notification过来的Object，也就是失败的那个Manager。然后在当前ViewController中present登陆页面。嗯，你是有方法能够在外面知道当前正在展示的ViewController的，具体方法你可以去Google。后面就是让用户登录了。 中间人收到Token刷新成功的回调，拿出刚才拿到的失败的那个Manager，直接调用[XManager loadData]，顺便dismiss掉登录页面，就好了。 参数会由XManager的paramSource提供，你只管调loadData就好了，paramSource的重要性就体现在这里了。回调什么的也在你上一次失败时的页面内，整个过程完全无缝，且基本没有耦合，还能做到token刷新后自动重发请求。我在自己App里也是这么做的，哈哈。

中间人是何方神圣？ 应该是某个单例对象把？毕竟 他需要一直在内存中啊。。

这里的中间人确实是一个单例对象呀
